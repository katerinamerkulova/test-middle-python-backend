# Тестовое задание для Наставника и Код-ревьюера курса Middle Python-разработчик


## 1. Задача миграции данных между хранилищами

### Описание практической части для студента

Реализуйте ETL — механизм загрузки фильмов из sqlite в Elasticsearch. Основная задача — написать SQL-запрос в sqlite для получения фильмов и всех связанных сущностей, трансформировать данные и загрузить их в индекс movies в Elasticsearch.

### Входные данные

- Таблицы в sqlite, на которые нужно опираться при запросах: movies, movie_actors, actors, writers: [db.sqlite](https://disk.yandex.ru/d/WO_ff-4DSDM4dw)
- Схема данных индекса movies, в которую должна производиться загрузка фильмов: [es_schema.txt](https://code.s3.yandex.net/middle-python/learning-materials/es_schema.txt)
- [Тесты Postman](https://code.s3.yandex.net/middle-python/learning-materials/ETLTests.json) для проверки правильности решения.

### Что должно получиться в итоге

- python-скрипт, который перегружает данные из sqlite в индекс movies в Elasticsearch.

## 2. Задача создания сервиса для поиска по базе фильмов

### Описание практической части для студента

Напишите микросервис на Flask, который реализует два метода:

- поиск фильмов;
- получение детальной информации о фильме.

Предполагается, что:

- данные из sqlite уже перегружены в Elasticsearch;
- система запущена и готова принимать запросы на [http://127.0.0.1:8000](http://127.0.0.xn--18000-s74z/) или [http://localhost:8000](http://xn--localhost8000-cu96d/).

Такие гарантии нужны, чтобы успешно запустить тесты.

### Тестирование решения

После того, как всё будет готово, протестируйте вашу систему. В приложенном файле собраны тестовые сценарии для проверки работоспособности получившегося API.

- [Movies API.json](https://code.s3.yandex.net/middle-python/learning-materials/Movies%20API.json)

Чтобы тесты прошли успешно, нужно организовать поиск по полям title, description, genre, actors_names, writers_names и director. Тесты в Postman построены таким образом, чтобы проверить получение определённых фильмов на заданный запрос. Ваша задача построить запрос в Elasticsearch так, чтобы на запрос по API эти записи возвращались в числе первых.